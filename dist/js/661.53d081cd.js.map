{"version":3,"file":"js/661.53d081cd.js","mappings":"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","sources":["webpack://nft-store/./src/views/BifrostAuth.vue","webpack://nft-store/./src/views/BifrostAuth.vue?3bbf"],"sourcesContent":["<template>\n\t<div class=\"flex justify-center h-full\">\n\t\t<div class=\"flex items-center mt-52\">\n\n\t\t\t<div>\n\n\t\t\t\t<div class=\"border max-w-3xl\">\n\t\t\t\t\t<div class=\"bg-sky-300 border p-4\">\n\t\t\t\t\t\t<p class=\"text-center\">Bifrost login callback data</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"p-4 overflow-x-scroll\">\n\n\t\t\t\t\t\t\t<div class=\"mb-4\">\n\t\t\t\t\t\t\t\t<p class=\"font-semibold\">address</p>\n\t\t\t\t\t\t\t\t<p>{{queryData.address}}</p>\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"mb-4\">\n\t\t\t\t\t\t\t\t<p class=\"font-semibold\">sig</p>\n\t\t\t\t\t\t\t\t<p>{{queryData.sig}}</p>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"mb-4\">\n\t\t\t\t\t\t\t\t<p class=\"font-semibold\">signer</p>\n\t\t\t\t\t\t\t\t<p>{{queryData.signer}}</p>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"mb-4\">\n\t\t\t\t\t\t\t\t<p class=\"font-semibold\">ts</p>\n\t\t\t\t\t\t\t\t<p>{{queryData.ts}}</p>\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<p class=\"text-sm mt-2 text-red-400\">These data will be stored in localstorage</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<p>Redirect in {{redirectTimeout}}</p>\n\t\t\t\t</div>\t\n\n\t\t\t\t\n\t\t\t</div>\n\n\t\t\t\t\n\t\t\t\n\t\t</div>\n\t\t\n\t</div>\n</template>\n\n<script>\n\t\n\timport { useRoute, useRouter } from 'vue-router'\n\timport { toRaw, markRaw, ref, inject } from 'vue'\n\timport { useStorage } from \"vue3-storage\";\n\timport { useStore } from \"vuex\"\n\n\texport default {\n\t\t\n\t\tsetup(){\n\n\t\t\tconst store = useStore();\n\n            // setup provider signer and store it\n            const ethers = inject('ethers')\n\n\n\t\t\ttry{\n\t\t\t\tconst route = useRoute()\n\t\t\t\tconst storage = useStorage()\n\t\t\t\tconst router = useRouter()\n\n\n\n\t\t\t\tconst queryData = toRaw(route.query)\n\n\t\t\t\tstorage.setStorageSync(\"address\", queryData.address)\n\t\t\t\tstorage.setStorageSync(\"sig\", queryData.sig)\n\t\t\t\tstorage.setStorageSync(\"signer\", queryData.signer)\n\t\t\t\tstorage.setStorageSync(\"ts\", queryData.ts)\t\t\t\t\n\n\t\t\t\tconst setUpContracts = () => {\n\t                const provider = new ethers.providers.JsonRpcProvider(\"https://rpc.chainbifrost.com\");\t             \n\t             \t            \n\n\t                const signer = new ethers.Wallet(\"765e8e35beaed8b0dea655206d725964d976ae911750c6422339edbeca52d3dd\", provider)\n\n\t                // const signer = new ethers.Wallet(queryData.sig, provider)\n\n\n\t                store.dispatch('contract/setSigner', markRaw(signer))\n\t                store.dispatch('contract/setProvider', markRaw(provider))\n\t                store.dispatch('contract/setUserAddress', queryData.address)\n\t            \n\t                // setup contracts\n\t                const contracts = store.getters['contract/contracts'];\n\n\t                for(const c of contracts){ \t               \n\t                    const contract = new ethers.Contract(c.address, c.abi, signer);\t              \n\t                    store.dispatch('contract/setContract', {address: c.address, contract:markRaw(contract)})\n\t                }\n\t            \n\t            }\t           \n\n\t            setUpContracts();   \n\n\t            store.dispatch('auth/authenticateUser', {\n\t            \taddress: queryData.address, \n\t            \ttimeout: queryData.ts,\n\t            \tstorage:storage\n\t            })\n\n\t\t\t\t// some redirect function\n\n\t\t\t\tconst redirectTimeout = ref(5);\n\n\t\t\t\tconst redirectInterval = setInterval(()=>{\t\t\t\t\t\n\t\t\t\t\tif(redirectTimeout.value > 0){\n\t\t\t\t\t\tredirectTimeout.value -= 1\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}, 1000)\n\n\t\t\t\tsetTimeout(()=>{\t\t\t\n\n\t\t\t\t\tclearInterval(redirectInterval)\t\n\n\t\t\t\t\trouter.push('/')\n\t\t\t\t}, 6000)\t\t\t\t\n\n\t\t\t\t// return \n\t\t\t\treturn {\n\t\t\t\t\tqueryData,\n\t\t\t\t\tredirectTimeout\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch(e){\n\t\t\t\tconsole.error(e)\n\t\t\t}\n\n\t\t}\n\n\t}\n\n</script>","import { render } from \"./BifrostAuth.vue?vue&type=template&id=1244eb1a\"\nimport script from \"./BifrostAuth.vue?vue&type=script&lang=js\"\nexport * from \"./BifrostAuth.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/saiful/projects/nft-store/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_4","_hoisted_7","_toDisplayString","_ctx","address","_hoisted_9","sig","_hoisted_11","signer","_hoisted_13","ts","_hoisted_14","setup","store","useStore","ethers","inject","route","useRoute","storage","useStorage","router","useRouter","queryData","toRaw","query","setStorageSync","setUpContracts","provider","providers","JsonRpcProvider","Wallet","dispatch","markRaw","contracts","getters","c","contract","Contract","abi","timeout","redirectTimeout","ref","redirectInterval","setInterval","value","setTimeout","clearInterval","push","e","console","error","__exports__","render"],"sourceRoot":""}